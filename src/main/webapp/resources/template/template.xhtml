<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ez="http://xmlns.jcp.org/jsf/composite/ezcomp">
    <h:head class="">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
        <ui:insert name="title">
            <title>
                <h:panelGroup rendered="#{sessionController.logged}">
                    <h:outputText value="#{sessionController.loggedUser.institution.name}"></h:outputText>
                    <h:outputText value=" - "></h:outputText>
                    <h:outputText value="#{sessionController.loggedUser.department.name} "></h:outputText>
                    <h:outputText value="- "></h:outputText>
                    <h:outputText value="#{sessionController.loggedUser.webUserPerson.name}"></h:outputText>
                </h:panelGroup>
                <h:panelGroup rendered="#{!sessionController.logged}">
                    <h:outputText value="Hospital Information Management System"></h:outputText>
                </h:panelGroup>
            </title>
        </ui:insert>

        <h:outputStylesheet library="css" name="ohmis.css"/>
        <h:outputScript library="js" name="jsfcrud.js"/>
    </h:head>
    <h:body style="height: 100vh;">

        <p:growl id="publicGrowl" showDetail="true" sticky="false" />
        <h:panelGroup rendered="#{!sessionController.firstLogin}">

            <h:panelGroup rendered="#{not sessionController.logged}">
                <h:panelGroup rendered="#{applicationController.hasAwebsiteAsFrontEnd}">
                    <ez:web_header/>
                </h:panelGroup>
                <h:panelGroup rendered="#{not applicationController.hasAwebsiteAsFrontEnd}">
                    <ui:insert name="login">
                        <ez:login/>
                    </ui:insert>
                </h:panelGroup>
            </h:panelGroup>
            <h:panelGroup rendered="#{sessionController.logged}">
                <h:panelGroup rendered="#{sessionController.department ne null}">
                    <ez:menu/>
                    <ui:insert name="content">
                    </ui:insert>
                </h:panelGroup>
                <h:panelGroup rendered="#{sessionController.department eq null}">
                    <ez:select_department/>
                </h:panelGroup>
                <ez:footer/>
            </h:panelGroup>
        </h:panelGroup>
        <h:panelGroup rendered="#{sessionController.firstLogin}">
            <ez:first_login/>
        </h:panelGroup>
        <p:messages showDetail="true" ></p:messages>
    </h:body>
</html>
